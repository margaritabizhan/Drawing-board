{"version":3,"sources":["store/toolState.js","components/Settingbar.jsx","tools/Tool.js","tools/Brush.js","tools/Rect.js","tools/Circle.js","tools/Eraser.js","tools/Line.js","store/canvasState.js","components/Toolbar.jsx","components/Canvas.jsx","App.jsx","index.jsx"],"names":["constructor","tool","makeAutoObservable","this","setTool","setFillColor","color","fillColor","setLineThickness","thickness","lineThickness","setStrokeColor","strokeColor","SettingBar","React","createElement","className","for","style","onChange","e","toolState","target","value","type","min","max","defaultValue","name","margin","Tool","canvas","ctx","getContext","destroyEvents","fillStyle","lineWidth","strokeStyle","onmousemove","onmousedown","onmouseup","Brush","super","listen","mouseMoveHandler","bind","mouseDownHandler","mouseUpHandler","mouseDown","beginPath","moveTo","pageX","offsetLeft","pageY","offsetTop","draw","x","y","lineTo","stroke","console","log","Rect","startX","startY","saved","toDataURL","currentX","currentY","width","height","w","h","img","Image","src","onload","clearRect","drawImage","rect","fill","Circle","radius","Math","abs","r","arc","PI","Eraser","save","restore","Line","xStart","yStart","xEnd","yEnd","undoList","redoList","setCanvas","pushToUndo","action","push","pushToRedo","undo","length","dataUrl","pop","redo","Toolbar","onClick","canvasState","marginLeft","Canvas","observer","canvasRef","useRef","useEffect","current","onMouseDown","ref","App","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.10d0c47a.chunk.js","sourcesContent":["import { makeAutoObservable } from 'mobx';\n\nclass ToolState {\n  tool = null;\n  constructor() {\n    makeAutoObservable(this)\n  };\n\n  setTool(tool) {\n    this.tool = tool;\n  };\n\n  setFillColor(color) {\n    this.tool.fillColor = color;\n  };\n\n  setLineThickness(thickness) {\n    this.tool.lineThickness = thickness;\n  };\n\n  setStrokeColor(color) {\n    this.tool.strokeColor = color;\n  }\n\n};\n\nexport default new ToolState();","import React from \"react\";\nimport '../styles/toolbar.scss';\nimport toolState from \"../store/toolState\";\n\nconst SettingBar = () => {\n  return (\n    <div className=\"setting-bar\">\n      <label for=\"line-thk\" style={{'margin-left': '5px'}}>Line Thickness</label>\n      <input \n        onChange={(e) => toolState.setLineThickness(e.target.value)}\n        type=\"number\"  min={1} max={50} defaultValue={1} \n        name=\"line-thk\" \n        style={{margin: '0 5px'}}></input>\n\n      <label for=\"border-color\">Border Color</label>\n      <input \n        onChange={(e) => toolState.setStrokeColor(e.target.value)}\n        type=\"color\" style={{margin: '0 5px'}}\n        name=\"border-color\"></input>\n    </div>\n  );\n}\n\nexport default SettingBar;","export default class Tool {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.destroyEvents();\n  };\n\n  set fillColor(color) {\n    this.ctx.fillStyle = color;\n  };\n\n  set lineThickness(thickness) {\n    this.ctx.lineWidth = thickness;\n  };\n\n  set strokeColor(color) {\n    this.ctx.strokeStyle = color;\n  };\n\n  destroyEvents() {\n    this.canvas.onmousemove = null;\n    this.canvas.onmousedown = null;\n    this.canvas.onmouseup = null;\n  }\n}","import Tool from './Tool';\nimport toolState from '../store/toolState';\n\nexport default class Brush extends Tool {\n  constructor(canvas) {\n    super(canvas);\n    this.listen()\n  };\n\n  listen() {\n    this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\n    this.canvas.onmousedown = this.mouseDownHandler.bind(this)\n    this.canvas.onmouseup = this.mouseUpHandler.bind(this)\n  };\n\n  mouseUpHandler(e) {\n    this.mouseDown = false;\n  };\n\n  mouseDownHandler(e) {\n    this.mouseDown = true\n    this.ctx.beginPath()\n    this.ctx.moveTo(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\n  };\n\n  mouseMoveHandler(e) {\n    if (this.mouseDown) {\n      this.draw(e.pageX - e.target.offsetLeft, e.pageY - e.target.offsetTop)\n    };\n  };\n\n  draw(x, y) {\n    this.ctx.lineTo(x, y);\n    this.ctx.stroke();\n    console.log('drawing with brush');\n    };\n};","import Tool from './Tool';\n\nexport default class Rect extends Tool {\n  constructor(canvas) {\n    super(canvas);\n    this.listen()\n  };\n\n  listen() {\n    this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\n    this.canvas.onmousedown = this.mouseDownHandler.bind(this)\n    this.canvas.onmouseup = this.mouseUpHandler.bind(this)\n  };\n\n  mouseUpHandler(e) {\n    this.mouseDown = false;\n  };\n\n  mouseDownHandler(e) {\n    this.mouseDown = true\n    this.ctx.beginPath()\n    this.startX = e.pageX - e.target.offsetLeft;\n    this.startY = e.pageY - e.target.offsetTop;\n    this.saved = this.canvas.toDataURL();\n  };\n\n  mouseMoveHandler(e) {\n    if (this.mouseDown) {\n      let currentX = e.pageX - e.target.offsetLeft;\n      let currentY = e.pageY - e.target.offsetTop;\n      let width = currentX - this.startX;\n      let height = currentY - this.startY;\n      this.draw(this.startX, this.startY, width, height);\n    };\n  };\n\n  draw(x, y, w, h) {\n    const img = new Image();\n    img.src = this.saved;\n\n    img.onload = () => {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.beginPath();\n      this.ctx.rect(x, y, w, h);\n      this.ctx.fill();\n      this.ctx.stroke();\n      console.log('drawing with rectangle');\n    };\n  };\n};\n","import Tool from './Tool';\n\nexport default class Circle extends Tool {\n  constructor(canvas) {\n    super(canvas);\n    this.listen()\n  };\n\n  listen() {\n    this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\n    this.canvas.onmousedown = this.mouseDownHandler.bind(this)\n    this.canvas.onmouseup = this.mouseUpHandler.bind(this)\n  };\n\n  mouseUpHandler(e) {\n    this.mouseDown = false;\n  };\n\n  mouseDownHandler(e) {\n    this.mouseDown = true\n    this.ctx.beginPath()\n    this.startX = e.pageX - e.target.offsetLeft;\n    this.startY = e.pageY - e.target.offsetTop;\n    this.saved = this.canvas.toDataURL();\n  };\n\n  mouseMoveHandler(e) {\n    if (this.mouseDown) {\n      let currentX = e.pageX - e.target.offsetLeft;\n      let radius = Math.abs(currentX - this.startX);\n      this.draw(this.startX, this.startY, radius);\n    };\n  };\n\n  draw(x, y, r) {\n    const img = new Image();\n    img.src = this.saved;\n\n    img.onload = () => {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.beginPath();\n      this.ctx.arc(x, y, r, 0, 2 * Math.PI);\n      this.ctx.fill();\n      this.ctx.stroke();\n      console.log('drawing with circle');\n    };\n  };\n};\n","import Brush from './Brush';\n\nexport default class Eraser extends Brush {\n  constructor(canvas) {\n    super(canvas);\n  };\n\n  draw(x, y) {\n    this.ctx.save();\n    this.ctx.strokeStyle = 'white';\n    this.ctx.lineTo(x, y);\n    this.ctx.stroke();\n    this.ctx.restore();\n    console.log('drawing with eraser');\n  };\n};","import Tool from './Tool';\n\nexport default class Line extends Tool {\n  constructor(canvas) {\n    super(canvas);\n    this.listen()\n  };\n\n  listen() {\n    this.canvas.onmousemove = this.mouseMoveHandler.bind(this)\n    this.canvas.onmousedown = this.mouseDownHandler.bind(this)\n    this.canvas.onmouseup = this.mouseUpHandler.bind(this)\n  };\n\n  mouseUpHandler(e) {\n    this.mouseDown = false;\n  };\n\n  mouseDownHandler(e) {\n    this.mouseDown = true\n    this.ctx.beginPath()\n    this.startX = e.pageX - e.target.offsetLeft;\n    this.startY = e.pageY - e.target.offsetTop;\n    this.saved = this.canvas.toDataURL();\n  };\n\n  mouseMoveHandler(e) {\n    if (this.mouseDown) {\n      let currentX = e.pageX - e.target.offsetLeft;\n      let currentY = e.pageY - e.target.offsetTop;\n      this.draw(this.startX, this.startY, currentX, currentY);\n    };\n  };\n\n  draw(xStart, yStart, xEnd, yEnd) {\n    const img = new Image();\n    img.src = this.saved;\n\n    img.onload = () => {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n      this.ctx.beginPath();\n      this.ctx.moveTo(xStart, yStart);\n      this.ctx.lineTo(xEnd, yEnd);\n      this.ctx.fill();\n      this.ctx.stroke();\n      console.log('drawing a line');\n    };\n  };\n};\n","import { makeAutoObservable } from 'mobx';\n\nclass CanvasState {\n  canvas = null;\n  undoList = [];\n  redoList = [];\n\n  constructor() {\n    makeAutoObservable(this)\n  };\n\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n\n  pushToUndo(action) {\n    this.undoList.push(action);\n  };\n\n  pushToRedo(action) {\n    this.redoList.push(action);\n  };\n\n  undo(){\n    let ctx = this.canvas.getContext('2d');\n    if(this.undoList.length !== 0) {\n      const dataUrl = this.undoList.pop();\n      let img = new Image();\n      img.src = dataUrl;\n\n        img.onload = () => {\n          ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n          ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n        };\n      this.redoList.push(this.canvas.toDataURL());\n    };\n  };\n\n  redo(){\n    let ctx = this.canvas.getContext('2d');\n    if(this.redoList.length !== 0) {\n      const dataUrl = this.redoList.pop();\n      let img = new Image();\n      img.src = dataUrl;\n\n        img.onload = () => {\n          ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n          ctx.drawImage(img, 0, 0, this.canvas.width, this.canvas.height);\n        };\n      this.undoList.push(this.canvas.toDataURL());\n    };\n  };\n};\n\nexport default new CanvasState();","import React from \"react\";\nimport '../styles/toolbar.scss';\nimport Brush from \"../tools/Brush\";\nimport Rect from \"../tools/Rect\";\nimport Circle from \"../tools/Circle\";\nimport Eraser from \"../tools/Eraser\";\nimport Line from \"../tools/Line\";\nimport toolState from \"../store/toolState\";\nimport canvasState from \"../store/canvasState\";\n\nconst Toolbar = () => {\n\n  const changeFillColor = (e) => {\n    toolState.setFillColor(e.target.value);\n    toolState.setStrokeColor(e.target.value);\n  };\n\n  return (\n    <div className=\"toolbar\">\n      <button className=\"toolbar-btn brush\" onClick={() => toolState.setTool(new Brush(canvasState.canvas))}></button>\n      <button className=\"toolbar-btn rect\" onClick={() => toolState.setTool(new Rect(canvasState.canvas))}></button>\n      <button className=\"toolbar-btn circle\" onClick={() => toolState.setTool(new Circle(canvasState.canvas))}></button>\n      <button className=\"toolbar-btn eraser\"onClick={() => toolState.setTool(new Eraser(canvasState.canvas))}></button>\n      <button className=\"toolbar-btn line\"onClick={() => toolState.setTool(new Line(canvasState.canvas))}></button>\n      <input type=\"color\" style={{marginLeft:10}} onChange={changeFillColor}/>\n      <button className=\"toolbar-btn undo\" onClick={() => canvasState.undo()}></button>\n      <button className=\"toolbar-btn redo\" onClick={() => canvasState.redo()}></button>\n      <button className=\"toolbar-btn save\"></button>\n    </div>\n  );\n}\n\nexport default Toolbar;","import React, { useRef, useEffect } from 'react';\nimport { observer } from 'mobx-react-lite';\nimport '../styles/canvas.scss';\nimport canvasState from '../store/canvasState';\nimport toolState from '../store/toolState';\nimport Brush from '../tools/Brush';\n\nconst Canvas = observer(() => {\n  const canvasRef = useRef();\n\n  const mouseDownHandler = () => {\n    canvasState.pushToUndo(canvasRef.current.toDataURL())\n  };\n\n  useEffect(() => {\n    canvasState.setCanvas(canvasRef.current);\n    toolState.setTool(new Brush(canvasRef.current))\n  }, []);\n\n  return (\n    <div className=\"canvas\">\n      <canvas \n        onMouseDown={() => mouseDownHandler()}\n        width={600} height={400} ref={canvasRef}></canvas>\n    </div>\n  );\n});\n\nexport default Canvas;\n","import React from 'react';\nimport './styles/app.scss'\nimport SettingBar from './components/Settingbar';\nimport Toolbar from './components/Toolbar';\nimport Canvas from './components/Canvas';\n\nconst App = () => {\n  return (\n    <div className='app'>\n      <Toolbar />\n      <SettingBar />\n      <Canvas />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n"],"sourceRoot":""}